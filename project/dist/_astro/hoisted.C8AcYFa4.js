import"./hoisted.Lhuf8C8-.js";const r=document.getElementById("reviewForm"),s=document.getElementById("submitButton"),c=document.getElementById("errorMessage"),y=document.getElementById("retryMessage");r&&s&&c&&y&&r.addEventListener("submit",async e=>{e.preventDefault(),s.disabled=!0,s.textContent="Submitting...",c.classList.add("hidden"),y.classList.add("hidden");try{const t=new FormData;t.append("venueId",r.dataset.venueId||"");const n=r.querySelector('input[name="rating"]:checked');if(!n)throw new Error("Please select a rating");t.append("rating",n.value);const u=r.querySelector("#comment");if(!u.value.trim())throw new Error("Please enter a review comment");t.append("comment",u.value.trim());const g=r.querySelector("#image");if(g.files?.length){const o=g.files[0];if(o.size>5*1024*1024)throw new Error("Image file size must be less than 5MB");if(!["image/jpeg","image/png","image/webp"].includes(o.type))throw new Error("Please upload a JPEG, PNG, or WebP image");t.append("image",o)}const w=await fetch("/api/reviews",{method:"POST",body:t});if(!w.ok){const o=await w.json();throw new Error(o.error||"Failed to submit review")}window.location.href="/reviews?success=true"}catch(t){console.error("Error:",t),s.disabled=!1,s.textContent="Submit Review",c.textContent=t instanceof Error?t.message:"Failed to submit review",c.classList.remove("hidden")}});let a=0;const d=document.querySelectorAll(".gallery-image"),i=document.getElementById("gallery"),l=i?.querySelector("img"),p=document.getElementById("closeGallery"),E=document.getElementById("prevImage"),I=document.getElementById("nextImage");function m(e){if(!l)return;const n=d[e].querySelector("img");n&&(a=e,l.src=n.src,l.alt=n.alt)}function f(){i?.classList.add("hidden"),document.body.style.overflow=""}function h(){const e=a-1<0?d.length-1:a-1;m(e)}function v(){const e=a+1>=d.length?0:a+1;m(e)}d.forEach(e=>{e.addEventListener("click",()=>{if(!i)return;const t=parseInt(e.getAttribute("data-index")||"0");i.classList.remove("hidden"),document.body.style.overflow="hidden",m(t)})});p?.addEventListener("click",f);E?.addEventListener("click",h);I?.addEventListener("click",v);document.addEventListener("keydown",e=>{if(!i?.classList.contains("hidden"))switch(e.key){case"Escape":f();break;case"ArrowLeft":h();break;case"ArrowRight":v();break}});
